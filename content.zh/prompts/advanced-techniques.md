---
title: 高级技巧
weight: 2
---

## 提示词高级技巧

掌握高级提示词技巧，可以显著提升 AI 编程工具的使用效果。

### 思维链（Chain of Thought）

#### 概念

思维链是一种提示词技术，要求 AI 展示推理过程，从而提高答案的准确性。

#### 基本用法

**简单提示**：
```
计算：一个房间有 3 个桌子，每个桌子有 4 把椅子，总共有多少把椅子？
```

**思维链提示**：
```
计算：一个房间有 3 个桌子，每个桌子有 4 把椅子，总共有多少把椅子？

请一步步思考：
1. 首先确定桌子的数量
2. 然后确定每个桌子的椅子数量
3. 最后计算总数
```

#### 代码生成中的应用

**示例**：
```
请设计一个缓存系统，按以下步骤思考：

1. 分析需求
   - 需要缓存什么数据？
   - 缓存的生命周期？
   - 缓存大小限制？

2. 设计数据结构
   - 使用什么数据结构存储？
   - 如何实现 LRU 淘汰策略？

3. 实现核心功能
   - 如何实现 get 和 set？
   - 如何处理缓存满的情况？

4. 考虑边界情况
   - 空缓存
   - 缓存满
   - 并发访问

请基于以上思考，提供完整的实现。
```

### 少样本学习（Few-Shot Learning）

#### 概念

通过提供少量示例，让 AI 学习任务模式，然后生成类似输出。

#### 基本用法

**示例**：
```
将以下函数名转换为对应的测试函数名：

示例 1：
函数：calculate_total
测试：test_calculate_total

示例 2：
函数：validate_email
测试：test_validate_email

示例 3：
函数：get_user_by_id
测试：test_get_user_by_id

现在请转换：
函数：process_payment
测试：？
```

#### 代码风格学习

**示例**：
```
根据以下代码风格，编写新的函数：

风格示例 1：
```python
def get_user_name(user_id: int) -> str:
    """获取用户名"""
    user = db.get_user(user_id)
    if not user:
        raise ValueError(f"User {user_id} not found")
    return user.name
```

风格示例 2：
```python
def get_user_email(user_id: int) -> str:
    """获取用户邮箱"""
    user = db.get_user(user_id)
    if not user:
        raise ValueError(f"User {user_id} not found")
    return user.email
```

请按照相同风格编写：
获取用户年龄的函数
```

### 角色扮演（Role Playing）

#### 概念

让 AI 扮演特定角色，从而获得更专业的回答。

#### 应用场景

**代码审查专家**：
```
你是一位有 20 年经验的代码审查专家，擅长发现代码中的问题。

请审查以下代码，从以下角度分析：
1. 代码质量和可读性
2. 潜在 Bug
3. 性能问题
4. 安全问题
5. 最佳实践

代码：
[提供代码]
```

**架构师**：
```
你是一位系统架构师，请为以下需求设计系统架构：

需求：
- 支持 100 万用户
- 高可用性（99.9%）
- 低延迟（< 100ms）
- 可扩展性

请提供：
1. 架构设计图（文字描述）
2. 技术选型
3. 关键组件说明
4. 扩展方案
```

### 分步骤执行（Step-by-Step）

#### 概念

将复杂任务分解为多个步骤，逐步完成。

#### 应用示例

**复杂重构任务**：
```
请按以下步骤重构代码：

步骤 1：分析现有代码
- 识别代码结构
- 找出重复代码
- 识别依赖关系

步骤 2：设计新结构
- 提取公共逻辑
- 定义接口
- 规划模块划分

步骤 3：实现重构
- 逐步迁移代码
- 保持功能不变
- 添加测试

步骤 4：验证
- 运行测试
- 检查性能
- 确认功能正确

原代码：
[提供代码]

请逐步执行，每完成一步后等待确认再继续。
```

### 自我验证（Self-Verification）

#### 概念

要求 AI 生成答案后，自己检查答案的正确性。

#### 应用示例

**代码生成 + 验证**：
```
请编写一个二分查找函数，然后自己验证：

1. 首先实现函数
2. 然后检查：
   - 边界条件处理是否正确？
   - 逻辑是否正确？
   - 是否有潜在 Bug？
3. 提供测试用例验证
4. 修正发现的问题

请按此流程执行。
```

### 约束和限制

#### 使用约束条件

**示例**：
```
编写一个函数，要求：
- 时间复杂度：O(n)
- 空间复杂度：O(1)
- 不使用内置排序函数
- 不使用额外数组
- 原地排序

请实现并说明如何满足这些约束。
```

#### 格式约束

**示例**：
```
生成 API 响应，格式要求：
- JSON 格式
- 包含 status, data, message 字段
- status 为 "success" 或 "error"
- data 为实际数据
- message 为可选的错误信息

示例格式：
{
  "status": "success",
  "data": {...},
  "message": null
}
```

### 上下文管理

#### 多轮对话

**保持上下文**：
```
对话 1：
请帮我设计一个用户认证系统。

对话 2：
基于之前的设计，请实现登录功能。

对话 3：
现在添加密码重置功能，要与登录功能集成。
```

#### 上下文引用

**示例**：
```
参考之前讨论的 UserManager 类设计，现在请实现：
1. 用户注册方法
2. 用户登录方法
3. 与之前设计的数据库模型集成
```

### 错误处理和调试

#### 错误分析提示

**示例**：
```
以下代码出现错误，请分析：

错误信息：
[提供错误信息]

代码：
[提供代码]

请：
1. 分析错误原因
2. 定位问题位置
3. 提供修复方案
4. 解释为什么会出现这个错误
```

#### 调试提示

**示例**：
```
请帮我调试以下代码，使用以下方法：
1. 添加调试日志
2. 检查变量值
3. 追踪执行流程
4. 识别问题点

代码：
[提供代码]

预期行为：[描述预期]
实际行为：[描述实际]
```

### 性能优化提示

**示例**：
```
请优化以下代码的性能：

当前代码：
[提供代码]

要求：
- 分析当前性能瓶颈
- 提供优化方案
- 实现优化后的代码
- 说明性能提升

性能目标：
- 执行时间减少 50%
- 内存使用减少 30%
```

### 最佳实践总结

1. **明确目标**：清楚说明要完成什么
2. **提供上下文**：给出足够的背景信息
3. **分步骤**：复杂任务分解为小步骤
4. **使用示例**：通过示例说明期望
5. **迭代优化**：根据结果不断改进提示词
6. **验证输出**：要求 AI 自我验证
7. **保持一致性**：在对话中保持上下文

### 相关资源

- [Advanced Prompt Engineering](https://www.promptingguide.ai/techniques)
- [Chain of Thought Prompting](https://arxiv.org/abs/2201.11903)
- [Few-Shot Learning Guide](https://www.promptingguide.ai/techniques/fewshot)
