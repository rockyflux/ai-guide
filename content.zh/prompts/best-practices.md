---
title: 最佳实践
weight: 3
---

## 提示词最佳实践

遵循最佳实践，可以编写出高效、可靠的提示词，获得更好的 AI 交互效果。

### 提示词设计原则

#### 1. 明确性原则

**好的实践**：
- ✅ 使用具体、明确的描述
- ✅ 避免模糊和歧义
- ✅ 明确指定输出格式

**示例对比**：

❌ **不明确**：
```
优化代码
```

✅ **明确**：
```
优化以下函数的性能，目标是将时间复杂度从 O(n²) 降低到 O(n log n)：
[提供代码]

要求：
- 保持功能不变
- 添加性能测试
- 说明优化方法
```

#### 2. 上下文充分原则

**好的实践**：
- ✅ 提供项目背景信息
- ✅ 说明技术栈和约束
- ✅ 包含相关代码片段

**示例**：
```
项目背景：
- 使用 Python 3.9+
- 遵循 PEP 8 规范
- 使用 FastAPI 框架
- 数据库使用 PostgreSQL

现有代码：
[提供相关代码]

任务：
基于现有代码结构，添加用户认证中间件。
```

#### 3. 结构化原则

**好的实践**：
- ✅ 使用清晰的段落结构
- ✅ 使用列表和编号
- ✅ 分步骤说明

**示例**：
```
请完成以下任务：

1. 代码生成
   - 创建 UserService 类
   - 实现 CRUD 操作
   - 添加错误处理

2. 测试编写
   - 单元测试
   - 集成测试
   - 边界测试

3. 文档编写
   - API 文档
   - 使用示例
```

### 提示词模板

#### 代码生成模板

```
作为 [角色]，请 [任务描述]。

技术栈：
- [技术1]
- [技术2]

要求：
- [要求1]
- [要求2]
- [要求3]

现有代码/上下文：
[提供相关代码]

输出格式：
- [格式要求1]
- [格式要求2]

请提供：
1. [输出1]
2. [输出2]
```

#### 代码审查模板

```
请审查以下代码：

代码：
[提供代码]

审查重点：
1. 代码质量和可读性
2. 潜在 Bug
3. 性能问题
4. 安全问题
5. 最佳实践

输出格式：
- 问题列表（按优先级）
- 每个问题的说明
- 改进建议
```

#### 问题解答模板

```
请解答以下问题：

问题：[问题描述]

上下文：
[提供相关上下文]

要求：
- 提供详细解释
- 包含代码示例（如适用）
- 说明最佳实践
- 提供相关资源链接
```

### 常见场景最佳实践

#### 1. 代码生成

**最佳实践**：
- 明确功能需求
- 指定技术栈
- 提供代码风格示例
- 要求包含测试

**示例**：
```
作为 Python 开发工程师，请创建一个数据验证库。

功能需求：
- 验证邮箱格式
- 验证手机号格式
- 验证 URL 格式
- 支持自定义验证规则

技术要求：
- Python 3.9+
- 使用 type hints
- 遵循 PEP 8
- 包含完整的文档字符串

代码风格参考：
[提供风格示例]

请提供：
1. 核心验证类
2. 预定义验证器
3. 单元测试（覆盖率 > 90%）
4. 使用示例
```

#### 2. 代码重构

**最佳实践**：
- 说明重构目标
- 保持功能不变
- 分步骤进行
- 要求测试验证

**示例**：
```
请重构以下代码，目标：
- 提高可读性
- 提高可维护性
- 遵循 SOLID 原则
- 提高可测试性

原代码：
[提供代码]

重构要求：
1. 提取重复逻辑
2. 改进命名
3. 添加类型提示
4. 改进错误处理

约束：
- 保持 API 接口不变
- 保持功能行为一致
- 所有现有测试必须通过

请提供：
1. 重构后的代码
2. 重构说明
3. 测试验证结果
```

#### 3. 错误调试

**最佳实践**：
- 提供完整错误信息
- 提供相关代码
- 说明预期行为
- 描述实际行为

**示例**：
```
请帮我调试以下问题：

错误信息：
```
Traceback (most recent call last):
  File "app.py", line 42, in process_data
    result = data['items'][0]['value']
KeyError: 'items'
```

相关代码：
[提供代码]

预期行为：
处理数据并返回第一个项目的值

实际行为：
抛出 KeyError

环境信息：
- Python 3.9
- 相关依赖版本

请：
1. 分析错误原因
2. 定位问题
3. 提供修复方案
4. 说明如何避免类似问题
```

#### 4. 文档生成

**最佳实践**：
- 指定文档类型
- 提供文档结构
- 要求包含示例
- 指定格式要求

**示例**：
```
请为以下 API 生成文档：

API 端点：
[提供 API 信息]

文档要求：
- 使用 Markdown 格式
- 包含请求/响应示例
- 说明参数和返回值
- 包含错误处理说明

文档结构：
1. 概述
2. 端点说明
3. 请求参数
4. 响应格式
5. 示例
6. 错误码
```

### 提示词优化技巧

#### 1. 迭代优化

**流程**：
1. 编写初始提示词
2. 测试并评估结果
3. 根据结果调整
4. 重复优化

**示例**：
```
初始版本：
写个排序函数

优化版本 1：
写个快速排序函数

优化版本 2：
作为 Python 开发工程师，请实现快速排序算法，包含类型提示和文档字符串。

优化版本 3：
作为 Python 开发工程师，请实现快速排序算法。

要求：
- 使用 Python 3.9+
- 包含完整的类型提示
- 添加详细的文档字符串
- 处理边界情况（空列表、单个元素）
- 包含单元测试
- 提供使用示例
```

#### 2. 使用约束

**明确约束条件**：
```
编写函数，约束：
- 时间复杂度：O(n log n)
- 空间复杂度：O(1)
- 不使用内置排序
- 原地排序
- 稳定排序
```

#### 3. 输出格式控制

**指定格式**：
```
请以以下格式输出：

```python
# 函数实现
def function_name():
    pass

# 测试用例
def test_function_name():
    pass

# 使用示例
if __name__ == "__main__":
    pass
```
```

### 避免常见错误

#### 1. 提示词过于简单

❌ **错误**：
```
写代码
```

✅ **正确**：
```
作为 Python 开发工程师，请编写一个用户认证系统，包含注册、登录、密码重置功能。
```

#### 2. 缺少上下文

❌ **错误**：
```
优化这个
```

✅ **正确**：
```
优化以下函数的性能，当前时间复杂度为 O(n²)，目标是 O(n log n)：
[提供代码和上下文]
```

#### 3. 要求冲突

❌ **错误**：
```
写一个 O(1) 时间复杂度的排序算法
```

✅ **正确**：
```
写一个尽可能高效的排序算法，说明时间复杂度和空间复杂度。
```

#### 4. 忽略边界情况

❌ **错误**：
```
写个函数处理用户输入
```

✅ **正确**：
```
写个函数处理用户输入，包含：
- 输入验证
- 错误处理
- 边界情况处理（空值、特殊字符等）
```

### 提示词检查清单

在提交提示词前，检查：

- [ ] 目标是否明确？
- [ ] 上下文是否充分？
- [ ] 要求是否具体？
- [ ] 格式是否清晰？
- [ ] 是否有示例？
- [ ] 约束条件是否明确？
- [ ] 输出格式是否指定？
- [ ] 是否有歧义？

### 工具和资源

#### 提示词工具

- **PromptPerfect**：提示词优化工具
- **ChatGPT Prompt Generator**：提示词生成器
- **Prompt Engineering Guide**：提示词工程指南

#### 学习资源

- [OpenAI Prompt Engineering](https://platform.openai.com/docs/guides/prompt-engineering)
- [Prompt Engineering Guide](https://www.promptingguide.ai)
- [Awesome ChatGPT Prompts](https://github.com/f/awesome-chatgpt-prompts)

### 总结

编写好的提示词需要：
1. ✅ 明确目标和需求
2. ✅ 提供充分上下文
3. ✅ 使用结构化格式
4. ✅ 指定输出格式
5. ✅ 迭代优化改进
6. ✅ 避免常见错误

遵循这些最佳实践，您将能够更有效地使用 AI 编程工具，获得更好的结果。
