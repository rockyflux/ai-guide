---
title: Rules
weight: 1
date: 2026-02-09T23:34:00+08:00
noTocArea: true
bookToc: false
---

## Rules / System Prompt（全局约束层）

在代理式 IDE（如 Cursor、Windsurf、Claude Code）中，AI 的行为通常由三层信息共同决定：

- **Rules（平台级）**：始终生效、不可被单次任务覆盖的行为约束。
- **`Claude.md`（项目级）**：提供当前仓库的事实、运行入口与关键约定。
- **Prompt（会话级）**：表达本次具体任务。

> **分工关系**：Rules 定义边界，`Claude.md` 提供语境，Prompt 触发执行。

| 组件 | 目的 | 作用范围 | 何时使用 | 示例文件 |
| --- | --- | --- | --- | --- |
| **Rules** | 定义全局约束和底线 | 工具/平台级（取决于实现） | 安全、工程验证、变更控制等长期约束 | `.cursorrules`（Cursor 实现） |
| **Claude.md** | 提供项目事实和运行入口 | 项目级（作为上下文被 Agent 读取） | 项目背景、运行方式、关键约定 | `CLAUDE.md` |
| **Prompt** | 表达具体任务需求 | 会话级 / 任务级 | 描述本次要达成的目标 | 用户输入提示 |
| **Skills.md** | 定义可复用操作流程（SOP） | 流程级 / 任务级 | 标准化任务执行方式 | `skills/*.md` |
| **Agents.md** | 定义 AI 角色与分工 | 编排级（多步任务） | 专职角色或复杂长链路任务 | `AGENTS.md` |


---

## 一句话定位

`rules` 用来回答：

> **无论当前执行什么任务，哪些约束必须始终成立？**

这些约束优先级高于单次 Prompt，不依赖具体文件是否被提及。

---

## 是否应该放入 Rules 的判断方法

优先放入 `rules` 的内容通常同时满足：

1. **与具体任务无关，但需要长期成立**
2. **可以被检查、验证或自动化执行**
3. **违反后会带来安全、稳定性或协作风险**

如果不满足：

- 仅在某类任务出现 → 放入 **skills（按需加载的 SOP）**
- 需要人工触发流程 → 放入 **commands**
- 属于项目背景或运行说明 → 放入 **`Claude.md`**

目标是让 `rules` **保持短、硬、可执行**，把流程细节交给更合适的载体。

---


## AGENTS.md

- **AGENTS.md 是一个开放的 Markdown 文档格式（open format）**，用来指导 AI 编码代理（coding agents）如何在你的项目中工作.
- 它类似于 **为 AI 编写的 README**：比传统 README 更适合被各种 AI agent 读取和理解.
- 主旨是统一项目内与 AI agent 相关的上下文和指令，**减少不同 AI 工具之间的配置碎片化**.

过去 AI coding tools 各自使用不同的配置方式——例如：

- Claude 依赖 **CLAUDE.md**
- Cursor 有自己的 **.cursorrules**
- Copilot 有各自插件指令

这种多头格式导致：

- 重复维护多份规范
- AI 运行时理解项目规则不一致
AGENTS.md 出现的原因就是解决这个碎片化问题，让不同 agent 都能读同一份文件。

更多案例和帮助文档请访问官方地址：[AGENTS.md](https://agents.md/)


## 示例案例

### Cursor Rules 示例

以下是一个简单的 `.cursorrules` 文件示例：

```text
你是IDE的AI编程助手，遵循核心工作流（研究->构思->计划->执行->评审）用中文协助用户，面向专业程序员，交互应简洁专业，避免不必要解释。所有交互均使用MCP `heng`工具进行，不可擅自未使用`heng`工具而停止交流，只有当用户在heng工具对话时明确说了“结束对话”或“不使用`heng`交流时，当次交流停止使用`heng` MCP工具。

[沟通守则]
1. 必须用中文回复，必须使用 MCP `heng`工具，不可擅自未使用`heng`工具而停止交流。
2. 响应以模式标签 `[模式：X]` 开始，初始为 `[模式：研究]`。
3. 核心工作流严格按 `研究->构思->计划->执行->评审` 顺序流转，用户可指令跳转。
4. 除非用户明确要求结束对话，否则所有步骤、交流都必须`重复`调用 MCP `heng`
5. 当用户提出`结束对话`，则当次交流停止使用`heng` MCP工具，且无需用MCP工具进行结束对话/再见等交互，直接进行对话总结，然后结束对话。
```
详细内容请访问：[复制代码](https://codecopy.cn/post/ihx3qa)

### Claude.md 示例

以下是一个简单的 `Claude.md` 文件示例：

```markdown
# CLAUDE.md 开发准则

## 概览
本文件用于指导在当前仓库内进行的全部开发与文档工作，确保输出遵循强制性标准并保持可审计性。

**上下文信息要求**
- 在编码前至少分析 3 个现有实现或模式，识别可复用的接口与约束。
- 绘制依赖与集成点，确认输入输出协议、配置与环境需求。
- 弄清现有测试框架、命名约定和格式化规则，确保输出与代码库保持一致。
- **优先使用 context7 查询编程库文档**，避免过度依赖网页搜索或猜测。
- **使用 github.search_code 搜索开源实现示例**，学习最佳实践。
- **使用 desktop-commander 进行本地文件分析和数据处理**，绝对优先于bash命令。

**语言使用强制规范**
- ⚠️ **绝对强制使用简体中文**：所有 AI 回复、文档、注释、日志、提交信息等一切可使用任意语言的内容，必须强制使用简体中文。
- 唯一例外：代码标识符（变量名、函数名、类名等）遵循项目既有命名约定。
- 违反此规范的任何输出必须立即重写为简体中文。

```
详细内容请访问：[代码复制](https://codecopy.cn/post/m1wfwo)


---

## 参考

- https://cursor.directory/rules
- https://dotcursorrules.com/
- https://claudecn.com/docs/claude-code/advanced/rules-playbook/
